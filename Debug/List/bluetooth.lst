###############################################################################
#
# IAR ANSI C/C++ Compiler V8.22.1.15669/W32 for ARM       20/Dec/2025  16:25:35
# Copyright 1999-2018 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\user\bluetooth.c
#    Command line =  
#        -f C:\Users\pnu3\AppData\Local\Temp\EW3386.tmp
#        (C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\user\bluetooth.c
#        -D USE_STDPERIPH_DRIVER -D STM32F10X_CL -lC
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Debug\List
#        -o
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Debug\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M3 -e --fpu=None --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        8.0\arm\INC\c\DLib_Config_Normal.h" -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\libraries\CMSIS\DeviceSupport\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\libraries\CMSIS\DeviceSupport\Startup\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\libraries\STM32F10x_StdPeriph_Driver_v3.5\inc\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\libraries\STM32F10x_StdPeriph_Driver_v3.5\src\
#        -I C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\user\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\user\inc\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\libraries\LCD\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Micrium\Software\uC-CPU\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Micrium\Software\uC-CPU\ARM-Cortex-M\ARMv7-M\IAR\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Micrium\Software\uCOS-III\Source\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Micrium\Software\uCOS-III\Ports\ARM-Cortex-M\ARMv7-M\IAR\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\user\uCOS-III\
#        -I
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Micrium\Software\uC-LIB\
#        -Ol -I "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        8.0\arm\CMSIS\Core\Include\" -I "C:\Program Files (x86)\IAR
#        Systems\Embedded Workbench 8.0\arm\CMSIS\DSP\Include\")
#    Locale       =  C
#    List file    =  
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Debug\List\bluetooth.lst
#    Object file  =  
#        C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\Debug\Obj\bluetooth.o
#
###############################################################################

C:\Users\pnu3\Desktop\deskproject\Embedded_System_TermProject\user\bluetooth.c
      1          #include "bluetooth.h"
      2          #include "misc.h"
      3          
      4          /*
      5           * Bluetooth Initialization extracted from main (1).c
      6           * Configures USART2 for Bluetooth communication.
      7           * PIN: PA2 (TX), PA3 (RX)
      8           * Baud: 9600
      9           */

   \                                 In section .text, align 4, keep-with-next
     10          void Bluetooth_Init(void) {
   \                     Bluetooth_Init: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
   \   00000002   0xB086             SUB      SP,SP,#+24
     11              GPIO_InitTypeDef GPIO_InitStructure;
     12              USART_InitTypeDef USART_InitStructure;
     13              NVIC_InitTypeDef NVIC_InitStructure;
     14          
     15              /* 1. RCC Configuration */
     16              /* Give Clocks to GPIOA (USART2 pins) and USART2 */
     17              /* Note: AFIO might be needed if remapping, but default PA2/PA3 doesn't typically need explicit AFIO clock for default mapping, 
     18                 but reference code enabled it. We will stick to reference code pattern if possible, 
     19                 but redundant clock enables are fine. */
     20              RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_AFIO, ENABLE);
   \   00000004   0x2101             MOVS     R1,#+1
   \   00000006   0x2005             MOVS     R0,#+5
   \   00000008   0x.... 0x....      BL       RCC_APB2PeriphClockCmd
     21              RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);
   \   0000000C   0x2101             MOVS     R1,#+1
   \   0000000E   0xF45F 0x3000      MOVS     R0,#+131072
   \   00000012   0x.... 0x....      BL       RCC_APB1PeriphClockCmd
     22          
     23              /* 2. GPIO Configuration */
     24              /* USART2 TX (PA2) -> Alternate Function Push-Pull */
     25              GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
   \   00000016   0x2004             MOVS     R0,#+4
   \   00000018   0xF8AD 0x0000      STRH     R0,[SP, #+0]
     26              GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
   \   0000001C   0x2003             MOVS     R0,#+3
   \   0000001E   0xF88D 0x0002      STRB     R0,[SP, #+2]
     27              GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
   \   00000022   0x2018             MOVS     R0,#+24
   \   00000024   0xF88D 0x0003      STRB     R0,[SP, #+3]
     28              GPIO_Init(GPIOA, &GPIO_InitStructure);
   \   00000028   0x4669             MOV      R1,SP
   \   0000002A   0x481F             LDR.N    R0,??Bluetooth_Init_0  ;; 0x40010800
   \   0000002C   0x.... 0x....      BL       GPIO_Init
     29          
     30              /* USART2 RX (PA3) -> Input Pull-Up */
     31              GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;
   \   00000030   0x2008             MOVS     R0,#+8
   \   00000032   0xF8AD 0x0000      STRH     R0,[SP, #+0]
     32              GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;
   \   00000036   0x2048             MOVS     R0,#+72
   \   00000038   0xF88D 0x0003      STRB     R0,[SP, #+3]
     33              GPIO_Init(GPIOA, &GPIO_InitStructure);
   \   0000003C   0x4669             MOV      R1,SP
   \   0000003E   0x481A             LDR.N    R0,??Bluetooth_Init_0  ;; 0x40010800
   \   00000040   0x.... 0x....      BL       GPIO_Init
     34          
     35              /* 3. USART2 Configuration */
     36              /* Values from reference: 9600, 8b, 1.5 StopBits, No Parity */
     37              USART_InitStructure.USART_BaudRate = 9600;
   \   00000044   0xF44F 0x5016      MOV      R0,#+9600
   \   00000048   0x9002             STR      R0,[SP, #+8]
     38              USART_InitStructure.USART_WordLength = USART_WordLength_8b;
   \   0000004A   0x2000             MOVS     R0,#+0
   \   0000004C   0xF8AD 0x000C      STRH     R0,[SP, #+12]
     39              USART_InitStructure.USART_StopBits = USART_StopBits_1_5;
   \   00000050   0xF44F 0x5040      MOV      R0,#+12288
   \   00000054   0xF8AD 0x000E      STRH     R0,[SP, #+14]
     40              USART_InitStructure.USART_Parity = USART_Parity_No;
   \   00000058   0x2000             MOVS     R0,#+0
   \   0000005A   0xF8AD 0x0010      STRH     R0,[SP, #+16]
     41              USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
   \   0000005E   0x2000             MOVS     R0,#+0
   \   00000060   0xF8AD 0x0014      STRH     R0,[SP, #+20]
     42              USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
   \   00000064   0x200C             MOVS     R0,#+12
   \   00000066   0xF8AD 0x0012      STRH     R0,[SP, #+18]
     43          
     44              USART_Init(USART2, &USART_InitStructure);
   \   0000006A   0xA902             ADD      R1,SP,#+8
   \   0000006C   0x480F             LDR.N    R0,??Bluetooth_Init_0+0x4  ;; 0x40004400
   \   0000006E   0x.... 0x....      BL       USART_Init
     45          
     46              /* 4. NVIC Configuration */
     47              /* Enable RX Interrupt */
     48              USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);
   \   00000072   0x2201             MOVS     R2,#+1
   \   00000074   0xF240 0x5125      MOVW     R1,#+1317
   \   00000078   0x480C             LDR.N    R0,??Bluetooth_Init_0+0x4  ;; 0x40004400
   \   0000007A   0x.... 0x....      BL       USART_ITConfig
     49          
     50              /* Configure NVIC for USART2 */
     51              /* Reference used Preemption 3, Sub 1. We should check if this conflicts, 
     52                 but for now we copy as requested. */
     53              NVIC_InitStructure.NVIC_IRQChannel = USART2_IRQn;
   \   0000007E   0x2026             MOVS     R0,#+38
   \   00000080   0xF88D 0x0004      STRB     R0,[SP, #+4]
     54              NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 3;
   \   00000084   0x2003             MOVS     R0,#+3
   \   00000086   0xF88D 0x0005      STRB     R0,[SP, #+5]
     55              NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
   \   0000008A   0x2001             MOVS     R0,#+1
   \   0000008C   0xF88D 0x0006      STRB     R0,[SP, #+6]
     56              NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
   \   00000090   0x2001             MOVS     R0,#+1
   \   00000092   0xF88D 0x0007      STRB     R0,[SP, #+7]
     57              NVIC_Init(&NVIC_InitStructure);
   \   00000096   0xA801             ADD      R0,SP,#+4
   \   00000098   0x.... 0x....      BL       NVIC_Init
     58          
     59              /* 5. Enable USART2 */
     60              USART_Cmd(USART2, ENABLE);
   \   0000009C   0x2101             MOVS     R1,#+1
   \   0000009E   0x4803             LDR.N    R0,??Bluetooth_Init_0+0x4  ;; 0x40004400
   \   000000A0   0x.... 0x....      BL       USART_Cmd
     61          }
   \   000000A4   0xB007             ADD      SP,SP,#+28
   \   000000A6   0xBD00             POP      {PC}             ;; return
   \                     ??Bluetooth_Init_0:
   \   000000A8   0x40010800         DC32     0x40010800
   \   000000AC   0x40004400         DC32     0x40004400

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      32   Bluetooth_Init
        32   -> GPIO_Init
        32   -> NVIC_Init
        32   -> RCC_APB1PeriphClockCmd
        32   -> RCC_APB2PeriphClockCmd
        32   -> USART_Cmd
        32   -> USART_ITConfig
        32   -> USART_Init


   Section sizes:

   Bytes  Function/Label
   -----  --------------
     176  Bluetooth_Init

 
 176 bytes in section .text
 
 176 bytes of CODE memory

Errors: none
Warnings: none
